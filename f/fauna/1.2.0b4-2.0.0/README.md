# Comparing `tmp/fauna-1.2.0b4-py2.py3-none-any.whl.zip` & `tmp/fauna-2.0.0-py2.py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,27 +1,27 @@
-Zip file size: 31189 bytes, number of entries: 25
--rw-r--r--  2.0 unx      303 b- defN 24-Apr-01 14:42 fauna/__init__.py
--rw-r--r--  2.0 unx      117 b- defN 24-Apr-01 14:42 fauna/client/__init__.py
--rw-r--r--  2.0 unx    23452 b- defN 24-Apr-01 14:42 fauna/client/client.py
--rw-r--r--  2.0 unx       86 b- defN 24-Apr-01 14:42 fauna/client/endpoints.py
--rw-r--r--  2.0 unx     2907 b- defN 24-Apr-01 14:42 fauna/client/headers.py
--rw-r--r--  2.0 unx     1985 b- defN 24-Apr-01 14:42 fauna/client/retryable.py
--rw-r--r--  2.0 unx     2063 b- defN 24-Apr-01 14:42 fauna/client/utils.py
--rw-r--r--  2.0 unx      161 b- defN 24-Apr-01 14:42 fauna/encoding/__init__.py
--rw-r--r--  2.0 unx     6005 b- defN 24-Apr-01 14:42 fauna/encoding/decoder.py
--rw-r--r--  2.0 unx     7855 b- defN 24-Apr-01 14:42 fauna/encoding/encoder.py
--rw-r--r--  2.0 unx     6350 b- defN 24-Apr-01 14:42 fauna/encoding/wire_protocol.py
--rw-r--r--  2.0 unx      413 b- defN 24-Apr-01 14:42 fauna/errors/__init__.py
--rw-r--r--  2.0 unx    11024 b- defN 24-Apr-01 14:42 fauna/errors/errors.py
--rw-r--r--  2.0 unx       88 b- defN 24-Apr-01 14:42 fauna/http/__init__.py
--rw-r--r--  2.0 unx     1261 b- defN 24-Apr-01 14:42 fauna/http/http_client.py
--rw-r--r--  2.0 unx     2992 b- defN 24-Apr-01 14:42 fauna/http/httpx_client.py
--rw-r--r--  2.0 unx      153 b- defN 24-Apr-01 14:42 fauna/query/__init__.py
--rw-r--r--  2.0 unx     8867 b- defN 24-Apr-01 14:42 fauna/query/models.py
--rw-r--r--  2.0 unx     3838 b- defN 24-Apr-01 14:42 fauna/query/query_builder.py
--rw-r--r--  2.0 unx     2657 b- defN 24-Apr-01 14:42 fauna/query/template.py
--rw-r--r--  2.0 unx      545 b- defN 24-Apr-01 14:44 fauna-1.2.0b4.dist-info/LICENSE
--rw-r--r--  2.0 unx    14888 b- defN 24-Apr-01 14:44 fauna-1.2.0b4.dist-info/METADATA
--rw-r--r--  2.0 unx      110 b- defN 24-Apr-01 14:44 fauna-1.2.0b4.dist-info/WHEEL
--rw-r--r--  2.0 unx        6 b- defN 24-Apr-01 14:44 fauna-1.2.0b4.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     1997 b- defN 24-Apr-01 14:44 fauna-1.2.0b4.dist-info/RECORD
-25 files, 100123 bytes uncompressed, 27993 bytes compressed:  72.0%
+Zip file size: 31513 bytes, number of entries: 25
+-rw-r--r--  2.0 unx      301 b- defN 24-May-20 17:28 fauna/__init__.py
+-rw-r--r--  2.0 unx      117 b- defN 24-May-20 17:28 fauna/client/__init__.py
+-rw-r--r--  2.0 unx    23387 b- defN 24-May-20 17:28 fauna/client/client.py
+-rw-r--r--  2.0 unx       86 b- defN 24-May-20 17:28 fauna/client/endpoints.py
+-rw-r--r--  2.0 unx     2907 b- defN 24-May-20 17:28 fauna/client/headers.py
+-rw-r--r--  2.0 unx     1932 b- defN 24-May-20 17:28 fauna/client/retryable.py
+-rw-r--r--  2.0 unx     2063 b- defN 24-May-20 17:28 fauna/client/utils.py
+-rw-r--r--  2.0 unx      161 b- defN 24-May-20 17:28 fauna/encoding/__init__.py
+-rw-r--r--  2.0 unx     6262 b- defN 24-May-20 17:28 fauna/encoding/decoder.py
+-rw-r--r--  2.0 unx     8213 b- defN 24-May-20 17:28 fauna/encoding/encoder.py
+-rw-r--r--  2.0 unx     6350 b- defN 24-May-20 17:28 fauna/encoding/wire_protocol.py
+-rw-r--r--  2.0 unx      409 b- defN 24-May-20 17:28 fauna/errors/__init__.py
+-rw-r--r--  2.0 unx    11024 b- defN 24-May-20 17:28 fauna/errors/errors.py
+-rw-r--r--  2.0 unx       88 b- defN 24-May-20 17:28 fauna/http/__init__.py
+-rw-r--r--  2.0 unx     1250 b- defN 24-May-20 17:28 fauna/http/http_client.py
+-rw-r--r--  2.0 unx     2992 b- defN 24-May-20 17:28 fauna/http/httpx_client.py
+-rw-r--r--  2.0 unx      153 b- defN 24-May-20 17:28 fauna/query/__init__.py
+-rw-r--r--  2.0 unx     8867 b- defN 24-May-20 17:28 fauna/query/models.py
+-rw-r--r--  2.0 unx     3838 b- defN 24-May-20 17:28 fauna/query/query_builder.py
+-rw-r--r--  2.0 unx     2657 b- defN 24-May-20 17:28 fauna/query/template.py
+-rw-r--r--  2.0 unx      545 b- defN 24-May-20 17:53 fauna-2.0.0.dist-info/LICENSE
+-rw-r--r--  2.0 unx    15711 b- defN 24-May-20 17:53 fauna-2.0.0.dist-info/METADATA
+-rw-r--r--  2.0 unx      110 b- defN 24-May-20 17:53 fauna-2.0.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx        6 b- defN 24-May-20 17:53 fauna-2.0.0.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     1987 b- defN 24-May-20 17:53 fauna-2.0.0.dist-info/RECORD
+25 files, 101416 bytes uncompressed, 28337 bytes compressed:  72.1%
```

## zipnote {}

```diff
@@ -54,23 +54,23 @@
 
 Filename: fauna/query/query_builder.py
 Comment: 
 
 Filename: fauna/query/template.py
 Comment: 
 
-Filename: fauna-1.2.0b4.dist-info/LICENSE
+Filename: fauna-2.0.0.dist-info/LICENSE
 Comment: 
 
-Filename: fauna-1.2.0b4.dist-info/METADATA
+Filename: fauna-2.0.0.dist-info/METADATA
 Comment: 
 
-Filename: fauna-1.2.0b4.dist-info/WHEEL
+Filename: fauna-2.0.0.dist-info/WHEEL
 Comment: 
 
-Filename: fauna-1.2.0b4.dist-info/top_level.txt
+Filename: fauna-2.0.0.dist-info/top_level.txt
 Comment: 
 
-Filename: fauna-1.2.0b4.dist-info/RECORD
+Filename: fauna-2.0.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## fauna/__init__.py

```diff
@@ -1,9 +1,9 @@
 __title__ = "Fauna"
-__version__ = "1.2.0b4"
+__version__ = "2.0.0"
 __api_version__ = "10"
 __author__ = "Fauna, Inc"
 __license__ = "MPL 2.0"
 __copyright__ = "2023 Fauna, Inc"
 
 from fauna.query import fql, Document, DocumentReference, NamedDocument, NamedDocumentReference, NullDocument, Module, Page
```

## fauna/client/client.py

```diff
@@ -1,23 +1,22 @@
-from datetime import timedelta
 from dataclasses import dataclass
-from typing import Any, Dict, Iterator, Mapping, Optional, List, Union
-from contextlib import contextmanager
+from datetime import timedelta
+from typing import Any, Dict, Iterator, Mapping, Optional, Union
 
 import fauna
+from fauna.client.headers import _DriverEnvironment, _Header, _Auth, Header
 from fauna.client.retryable import Retryable
+from fauna.client.utils import _Environment, LastTxnTs
+from fauna.encoding import FaunaEncoder, FaunaDecoder
+from fauna.encoding import QuerySuccess, QueryTags, QueryStats
 from fauna.errors import FaunaError, ClientError, ProtocolError, \
-    RetryableFaunaException, NetworkError
-from fauna.client.headers import _DriverEnvironment, _Header, _Auth, Header
+  RetryableFaunaException, NetworkError
 from fauna.http.http_client import HTTPClient
 from fauna.query import Query, Page, fql
 from fauna.query.models import StreamToken
-from fauna.client.utils import _Environment, LastTxnTs
-from fauna.encoding import FaunaEncoder, FaunaDecoder
-from fauna.encoding import QuerySuccess, ConstraintFailure, QueryTags, QueryStats
 
 DefaultHttpConnectTimeout = timedelta(seconds=5)
 DefaultHttpReadTimeout: Optional[timedelta] = None
 DefaultHttpWriteTimeout = timedelta(seconds=5)
 DefaultHttpPoolTimeout = timedelta(seconds=5)
 DefaultIdleConnectionTimeout = timedelta(seconds=5)
 DefaultQueryTimeout = timedelta(seconds=5)
```

## fauna/client/retryable.py

```diff
@@ -1,15 +1,14 @@
 import abc
 from dataclasses import dataclass
 from random import random
 from time import sleep
 from typing import Callable, Optional, TypeVar, Generic
 
-from fauna.encoding import QuerySuccess
-from fauna.errors import RetryableFaunaException, ClientError
+from fauna.errors import RetryableFaunaException
 
 
 class RetryStrategy:
 
   @abc.abstractmethod
   def wait(self) -> float:
     pass
```

## fauna/encoding/decoder.py

```diff
@@ -1,13 +1,14 @@
+import base64
 from typing import Any, List, Union
 
 from iso8601 import parse_date
 
 from fauna.query.models import Module, DocumentReference, Document, NamedDocument, NamedDocumentReference, Page, \
-    NullDocument, StreamToken
+  NullDocument, StreamToken
 
 
 class FaunaDecoder:
   """Supports the following types:
 
      +--------------------+---------------+
      | Python             | Fauna         |
@@ -30,14 +31,16 @@
      +--------------------+---------------+
      | True               | true          |
      +--------------------+---------------+
      | False              | false         |
      +--------------------+---------------+
      | None               | null          |
      +--------------------+---------------+
+     | bytearray          | @bytes        |
+     +--------------------+---------------+
      | *DocumentReference | @ref          |
      +--------------------+---------------+
      | *Document          | @doc          |
      +--------------------+---------------+
      | Module             | @mod          |
      +--------------------+---------------+
      | Page               | @set          |
@@ -58,14 +61,15 @@
             - { "@time": "..." } decodes to a datetime
             - { "@date": "..." } decodes to a date
             - { "@doc": ... } decodes to a Document or NamedDocument
             - { "@ref": ... } decodes to a DocumentReference or NamedDocumentReference
             - { "@mod": ... } decodes to a Module
             - { "@set": ... } decodes to a Page
             - { "@stream": ... } decodes to a StreamToken
+            - { "@bytes": ... } decodes to a bytearray
 
         :param obj: the object to decode
         """
     return FaunaDecoder._decode(obj)
 
   @staticmethod
   def _decode(o: Any, escaped: bool = False):
@@ -99,14 +103,17 @@
         return FaunaDecoder._decode(dct["@object"], True)
       if "@mod" in dct:
         return Module(dct["@mod"])
       if "@time" in dct:
         return parse_date(dct["@time"])
       if "@date" in dct:
         return parse_date(dct["@date"]).date()
+      if "@bytes" in dct:
+        bts = base64.b64decode(dct["@bytes"])
+        return bytearray(bts)
       if "@doc" in dct:
         value = dct["@doc"]
         if isinstance(value, str):
           # Not distinguishing between DocumentReference and NamedDocumentReference because this shouldn't
           # be an issue much longer
           return DocumentReference.from_string(value)
```

## fauna/encoding/encoder.py

```diff
@@ -1,11 +1,13 @@
+import base64
 from datetime import datetime, date
-from typing import Any, Optional, List
+from typing import Any, Optional, List, Union
 
-from fauna.query.models import DocumentReference, Module, Document, NamedDocument, NamedDocumentReference, NullDocument, StreamToken
+from fauna.query.models import DocumentReference, Module, Document, NamedDocument, NamedDocumentReference, NullDocument, \
+  StreamToken
 from fauna.query.query_builder import Query, Fragment, LiteralFragment, ValueFragment
 
 _RESERVED_TAGS = [
     "@date",
     "@doc",
     "@double",
     "@int",
@@ -42,14 +44,16 @@
     +-------------------------------+---------------+
     | True                          | True          |
     +-------------------------------+---------------+
     | False                         | False         |
     +-------------------------------+---------------+
     | None                          | None          |
     +-------------------------------+---------------+
+    | bytes / bytearray             | @bytes        |
+    +-------------------------------+---------------+
     | *Document                     | @ref          |
     +-------------------------------+---------------+
     | *DocumentReference            | @ref          |
     +-------------------------------+---------------+
     | Module                        | @mod          |
     +-------------------------------+---------------+
     | Query                         | fql           |
@@ -114,14 +118,18 @@
     return {"@time": obj.isoformat(sep="T")}
 
   @staticmethod
   def from_date(obj: date):
     return {"@date": obj.isoformat()}
 
   @staticmethod
+  def from_bytes(obj: Union[bytearray, bytes]):
+    return {"@bytes": base64.b64encode(obj).decode('ascii')}
+
+  @staticmethod
   def from_doc_ref(obj: DocumentReference):
     return {"@ref": {"id": obj.id, "coll": FaunaEncoder.from_mod(obj.coll)}}
 
   @staticmethod
   def from_named_doc_ref(obj: NamedDocumentReference):
     return {"@ref": {"name": obj.name, "coll": FaunaEncoder.from_mod(obj.coll)}}
 
@@ -181,14 +189,16 @@
       return FaunaEncoder.from_doc_ref(o)
     elif isinstance(o, NamedDocumentReference):
       return FaunaEncoder.from_named_doc_ref(o)
     elif isinstance(o, datetime):
       return FaunaEncoder.from_datetime(o)
     elif isinstance(o, date):
       return FaunaEncoder.from_date(o)
+    elif isinstance(o, bytearray) or isinstance(o, bytes):
+      return FaunaEncoder.from_bytes(o)
     elif isinstance(o, Document):
       return FaunaEncoder.from_doc_ref(DocumentReference(o.coll, o.id))
     elif isinstance(o, NamedDocument):
       return FaunaEncoder.from_named_doc_ref(
           NamedDocumentReference(o.coll, o.name))
     elif isinstance(o, NullDocument):
       return FaunaEncoder.encode(o.ref)
```

## fauna/errors/__init__.py

```diff
@@ -1,6 +1,6 @@
-from .errors import FaunaException
+from .errors import AuthenticationError, AuthorizationError, QueryCheckError, QueryRuntimeError, \
+  QueryTimeoutError, ServiceInternalError, ServiceTimeoutError, ThrottlingError, ContendedTransactionError, \
+  InvalidRequestError, AbortError, RetryableFaunaException
 from .errors import ClientError, FaunaError, NetworkError
+from .errors import FaunaException
 from .errors import ProtocolError, ServiceError
-from .errors import AuthenticationError, AuthorizationError, QueryCheckError, QueryRuntimeError, \
-    QueryTimeoutError, ServiceInternalError, ServiceTimeoutError, ThrottlingError, ContendedTransactionError, \
-    InvalidRequestError, AbortError, RetryableFaunaException
```

## fauna/http/http_client.py

```diff
@@ -1,12 +1,11 @@
 import abc
 import contextlib
-
-from typing import Iterator, Mapping, Any, Optional
 from dataclasses import dataclass
+from typing import Iterator, Mapping, Any
 
 
 @dataclass(frozen=True)
 class ErrorResponse:
   status_code: int
   error_code: str
   error_message: str
```

## fauna/http/httpx_client.py

 * *Ordering differences only*

```diff
@@ -1,11 +1,11 @@
 import json
+from contextlib import contextmanager
 from json import JSONDecodeError
 from typing import Mapping, Any, Optional, Iterator
-from contextlib import contextmanager
 
 import httpx
 
 from fauna.errors import ClientError, NetworkError
 from fauna.http.http_client import HTTPResponse, HTTPClient
```

## fauna/query/__init__.py

 * *Ordering differences only*

```diff
@@ -1,2 +1,2 @@
-from .query_builder import fql, Query
 from .models import Document, DocumentReference, NamedDocument, NamedDocumentReference, NullDocument, Module, Page
+from .query_builder import fql, Query
```

## fauna/query/template.py

 * *Ordering differences only*

```diff
@@ -1,9 +1,9 @@
-from typing import Optional, Tuple, Iterator, Match
 import re as _re
+from typing import Optional, Tuple, Iterator, Match
 
 
 class FaunaTemplate:
   """A template class that supports variables marked with a ${}-sigil. Its primary purpose
     is to expose an iterator for the template parts that support composition of FQL queries.
 
     Implementation adapted from https://github.com/python/cpython/blob/main/Lib/string.py
```

## Comparing `fauna-1.2.0b4.dist-info/LICENSE` & `fauna-2.0.0.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `fauna-1.2.0b4.dist-info/METADATA` & `fauna-2.0.0.dist-info/METADATA`

 * *Files 5% similar despite different names*

```diff
@@ -1,18 +1,18 @@
 Metadata-Version: 2.1
 Name: fauna
-Version: 1.2.0b4
+Version: 2.0.0
 Summary: Fauna Python driver for FQL 10+
-Home-page: https://github.com/fauna/fauna-python/tree/beta
+Home-page: https://github.com/fauna/fauna-python
 Author: Fauna, Inc
 Author-email: priority@fauna.com
 License: MPL 2.0
 Keywords: faunadb fauna
 Platform: UNKNOWN
-Classifier: Development Status :: 4 - Beta
+Classifier: Development Status :: 5 - Production/Stable
 Classifier: Intended Audience :: Developers
 Classifier: License :: OSI Approved :: Mozilla Public License 2.0 (MPL 2.0)
 Classifier: Programming Language :: Python :: 3
 Classifier: Programming Language :: Python :: 3.9
 Classifier: Programming Language :: Python :: 3.10
 Classifier: Programming Language :: Python :: 3.11
 Classifier: Programming Language :: Python :: 3.12
@@ -42,15 +42,15 @@
 [![License](https://img.shields.io/badge/license-MPL_2.0-blue.svg?maxAge=2592000)](https://raw.githubusercontent.com/fauna/fauna-python/main/LICENSE)
 
 This driver can only be used with FQL v10, and is not compatible with earlier versions
 of FQL. To query your databases with earlier API versions, see
 the [faunadb](https://pypi.org/project/faunadb/) package.
 
 See the [Fauna Documentation](https://docs.fauna.com/fauna/current/)
-for additional information how to configure and query your databases.
+for additional information on how to configure and query your databases.
 
 ## Installation
 Pre-release installations must specify the version you want to install. Find the version you want to install on [PyPI](https://pypi.org/project/fauna/#history).
 ```bash
 pip install fauna==<version>
 ```
 
@@ -70,22 +70,22 @@
 You can configure your secret by passing it directly to the client or by setting an environment variable.
 
 Supported Environment Variables:
 
 * ``FAUNA_ENDPOINT``: The Fauna endpoint to use. For example, ``http://localhost:8443``
 * ``FAUNA_SECRET``: The Fauna secret to use.
 
-```python 
+```python
 from fauna import fql
 from fauna.client import Client
 from fauna.encoding import QuerySuccess
 from fauna.errors import FaunaException
 
 client = Client()
-# The client defaults to using using the value stored FAUNA_SECRET for its secret.
+# The client defaults to using the value stored FAUNA_SECRET for its secret.
 # Either set the FAUNA_SECRET env variable or retrieve it from a secret store.
 # As a best practice, don't store your secret directly in your code.
 
 try:
     # create a collection
     q1 = fql('Collection.create({ name: "Dogs" })')
     client.query(q1)
@@ -120,15 +120,15 @@
 print(res.data) # 8
 ```
 
 ## Serialization / Deserialization
 
 Serialization and deserialization with user-defined classes is not yet supported.
 
-When building queries, adapt your classes into dicts or lists prior to using them in composition. When instantiating classes from the query result data, build them from the expected result.
+When building queries, adapt your classes into dicts or lists before using them in composition. When instantiating classes from the query result data, build them from the expected result.
 
 ```python
 class MyClass:
     def __init__ (self, my_prop):
         self.my_prop = my_prop
 
     def to_dict(self):
@@ -278,100 +278,168 @@
     qs: QuerySuccess = client.query(q)
     emit_stats(qs.stats)
 except ServiceError as e:
     if e.stats is not None:
         emit_stats(e.stats)
     # more error handling...
 ```
-## Streaming
-Below are examples on how to get started with streaming in the python driver. For more information on streaming capabilities visit our [Streaming Documentation](https://docs.fauna.com/fauna/current/reference/streaming_reference/)
 
-There are two ways a stream can be initiated with the python driver:
-1. Obtaining a stream token by first issuing a fql query that returns a stream token and providing that to the client's stream method.
-2. Providing the stream method with a fql query that returns a stream token
-   1. In this case the stream method will first issue a request to obtain the stream token and then start the stream.
+## Pagination
 
-_Using a Stream Token_
-```python
-import fauna
+Use the ``Client.paginate()`` method to iterate sets that contain more than one
+page of results.
+
+``Client.paginate()`` accepts the same query options as ``Client.query()``.
 
+Change the default items per page using FQL's ``<set>.pageSize()`` method.
+
+```python
+from datetime import timedelta
 from fauna import fql
-from fauna.client import Client, StreamOptions
+from fauna.client import Client, QueryOptions
+
+# Adjust `pageSize()` size as needed.
+query = fql(
+    """
+    Product
+        .byName("limes")
+        .pageSize(60) { description }"""
+)
 
 client = Client()
-response = client.query(fql('''
+
+options = QueryOptions(query_timeout=timedelta(seconds=20))
+
+pages = client.paginate(query, options)
+
+for products in pages:
+    for product in products:
+        print(products)
+```
+
+## Event Streaming
+
+The driver supports [Event Streaming](https://docs.fauna.com/fauna/current/learn/streaming).
+
+### Start a stream
+
+To get a stream token, append ``toStream()`` or ``changesOn()`` to a set from a
+[supported source](https://docs.fauna.com/fauna/current/reference/streaming_reference/#supported-sources).
+
+
+To start and subscribe to the stream, pass the stream token to
+``Client.stream()``:
+
+```python
+  from fauna import fql
+  from fauna.client import Client
+
+  client = Client()
+
+  response = client.query(fql('''
   let set = Product.all()
-  { 
+  {
     initialPage: set.pageSize(10),
-    streamToken: set.toStream() { name, price, category }
+    streamToken: set.toStream()
   }
   '''))
-  
-initialPage = response.data["initialPage"]
-streamToken = response.data["streamToken"]
 
-with client.stream(streamToken) as stream:
-  for event in stream:
-    print(event["type"])
-    print(event["data"])
-    eventType = event["type"]
-    if (eventType == "add"):
-      print("add event")
-      ## handle add event
-    elif (eventType == "update"):
-      print("update event")
-      ## handle update event
-    elif (eventType == "remove"):
-      print("remove event")
-      ## handle remove event
+  initialPage = response.data['initialPage']
+  streamToken = response.data['streamToken']
+
+  client.stream(streamToken)
 ```
 
-_Using the client stream method directly_
+You can also pass a query that produces a stream token directly to
+``Client.stream()``:
 
 ```python
-import fauna
+  query = fql('Product.all().changesOn(.price, .quantity)')
 
-from fauna import fql
-from fauna.client import Client
+  client.stream(query)
+```
 
-client = Client()
+### Iterate on a stream
+
+``Client.stream()`` returns an iterator that emits events as they occur. You can
+use a generator expression to iterate through the events:
 
-with client.stream(fql(
-  'Product.all().where(.price > 50).toStream() { name, price, category }'
-)) as stream:
+```python
+query = fql('Product.all().changesOn(.price, .quantity)')
+
+with client.stream(query) as stream:
   for event in stream:
-    print(event["type"])
-    print(event["data"])
+    eventType = event['type']
+    if (eventType == 'add'):
+      print('Add event: ', event)
+      ## ...
+    elif (eventType == 'update'):
+      print('Update event: ', event)
+      ## ...
+    elif (eventType == 'remove'):
+      print('Remove event: ', event)
+      ## ...
 ```
 
-_Stream events iterator_
-
-The stream method returns an iterator that can be used to provide the events as they happen.  See above examples for using the iterator to process events.
+### Close a stream
 
-_Error Handling_
+Use ``<stream>.close()`` to close a stream:
 
-If a non retryable error occurs as part of stream processing, or when attempting to open a stream, a FaunaException will be raised. This can be handled as follows:
 ```python
-import fauna
+query = fql('Product.all().changesOn(.price, .quantity)')
+
+count = 0
+with client.stream(query) as stream:
+  for event in stream:
+    print('Stream event', event)
+    # ...
+    count+=1
 
+    if (count == 2):
+       stream.close()
+```
+
+### Error handling
+
+If a non-retryable error occurs when opening or processing a stream, Fauna
+raises a ``FaunaException``:
+
+```python
 from fauna import fql
 from fauna.client import Client
 from fauna.errors import FaunaException
 
 client = Client()
 
 try:
   with client.stream(fql(
-    'Product.all().where(.price > 50).toStream() { name, price, category }'
+    'Product.all().changesOn(.price, .quantity)'
   )) as stream:
     for event in stream:
-      print(event["type"])
-      print(event["data"])
+      print(event)
+    # ...
 except FaunaException as e:
-  print("error ocurred with stream: ", e)
+  print('error ocurred with stream: ', e)
+```
+### Stream options
+
+The client configuration sets default options for the ``Client.stream()``
+method.
+
+You can pass a ``StreamOptions`` object to override these defaults:
+
+```python
+options = StreamOptions(
+  max_attempts=5,
+  max_backoff=1,
+  start_ts=1710968002310000,
+  status_events=True,
+ )
+
+client.stream(fql('Product.all().toStream()'), options)
 ```
 
 ## Setup
 
 ```bash
 virtualenv venv
 source venv/bin/activate
```

## Comparing `fauna-1.2.0b4.dist-info/RECORD` & `fauna-2.0.0.dist-info/RECORD`

 * *Files 18% similar despite different names*

```diff
@@ -1,25 +1,25 @@
-fauna/__init__.py,sha256=Kq0F1Ow4eM384cHAj0bk1xDT0edZ8id43dgYqzRLYKg,303
+fauna/__init__.py,sha256=bEQe0DhiWwozUKOh12uqpfBw4W5aUcUeOf4h0_oQisY,301
 fauna/client/__init__.py,sha256=Aif7kCISY53yWUozLEKP7hQnwjjcKjv0YqQEpi3jd3g,117
-fauna/client/client.py,sha256=8-FV_uLafUCH56R10el3vhSH6YzSzJt7jGsdCTJpNww,23452
+fauna/client/client.py,sha256=9LAcvkx0JJIa68oP8VYTFBwnn-xvNACxCsmReIv0T4k,23387
 fauna/client/endpoints.py,sha256=nYEaZ7fJ4RPsXcLQToOO1BMWRWdgJFGr1mB4-BOa2-w,86
 fauna/client/headers.py,sha256=ueCezo2KJhaiNTOgA8qrFQVNkPg38re5jlofPQoXoL4,2907
-fauna/client/retryable.py,sha256=7n-JJzAexLGZGoPaJs2IrH4thSdHyAhwpHYNIGuyz2E,1985
+fauna/client/retryable.py,sha256=e7uTYuOOLWGjeDXC9W9XAZhN7GhPTJmcx6yM04brQL4,1932
 fauna/client/utils.py,sha256=TEwlZDMOl1XqxQbOCZWsgr-VqwaBQVIYPBGme7pBPzk,2063
 fauna/encoding/__init__.py,sha256=_IWx06Wiqa2jrpIEjbGAPcCFyFj0y39KuGhXc3YMPyg,161
-fauna/encoding/decoder.py,sha256=BqN5rYetEmCzS5IDnn4HTb3eGKfvSUSG5cyOOhv2w4I,6005
-fauna/encoding/encoder.py,sha256=4ieQAP92d49s62NQx3dC8wpD9FasuvPm83qmsh-3U08,7855
+fauna/encoding/decoder.py,sha256=cnwE8E-Cw8XyjThyrSN4Td4Cji_fH8MjCoDmPY4fe6g,6262
+fauna/encoding/encoder.py,sha256=JDOlUNTR7HQ40wM5tossPzWPRxld1bgUHqaJ8ua1iMo,8213
 fauna/encoding/wire_protocol.py,sha256=v1CF3lGAMD4epyxx8_m3h29h5SxGoZp7vLFLSCCtx6A,6350
-fauna/errors/__init__.py,sha256=4VppHCrSLex8-ocaJhS-_nv2fOseUYl5HVIllmIBCOc,413
+fauna/errors/__init__.py,sha256=jw8-QBYxyhpSo9LMxhnlihJY6Wd65XV-HJxfHYL8pWs,409
 fauna/errors/errors.py,sha256=ZDsuuJiWWDPV2o_kabNZSbn0cRFa_HtCzGbPPuguZj0,11024
 fauna/http/__init__.py,sha256=bPdaa7lvksdkCrazHEnqHPTHi0kWD-13bxryDwSguM8,88
-fauna/http/http_client.py,sha256=bXIXn8B7hhLAGDxArl2zgt2uZxz3f4nwmQ2ZwgSiI3o,1261
-fauna/http/httpx_client.py,sha256=WR0rJhdbFU3vt7by-cv-JzOqLxr6WAVo8SROg1XWzIQ,2992
-fauna/query/__init__.py,sha256=Ip51imOskDJpQhDahuq-VcX3o3cb4Y62HUG26rzXCh0,153
+fauna/http/http_client.py,sha256=XxY8ijjvx2f39ZQpn8Fmo9UXZ1sS4963XSdFEeFzGRo,1250
+fauna/http/httpx_client.py,sha256=bdt63OVpSfabKJTIgGccgT0rhE_zBFP2Mc8YEPDDu5Q,2992
+fauna/query/__init__.py,sha256=IWcUPQ12ZzuNQ0yO--2JWGKH7FQUuZFf8zPyCitBo1g,153
 fauna/query/models.py,sha256=W2hNzgLrxUepLQN7qDxAITa14YoazstnGvoLmzA55qM,8867
 fauna/query/query_builder.py,sha256=QD5w7ohKdJd00XLtSs_Y7Dplos64BzfC0rqxNCluI7g,3838
-fauna/query/template.py,sha256=cFvLR639MqpH_en8PH7gE89PgPSfR3sd0iKaOKm3pQI,2657
-fauna-1.2.0b4.dist-info/LICENSE,sha256=0uf36d4oXjlrnYCeCbzUq9413zcktAbg1y5V_dKmNlQ,545
-fauna-1.2.0b4.dist-info/METADATA,sha256=2ESIAELGZr1J3BwyIkjxAB86WxN2KKt2VIgtw3WowHw,14888
-fauna-1.2.0b4.dist-info/WHEEL,sha256=a-zpFRIJzOq5QfuhBzbhiA1eHTzNCJn8OdRvhdNX0Rk,110
-fauna-1.2.0b4.dist-info/top_level.txt,sha256=Ftl5tOivmmW8rHU9QbV0qMG8M9WQp3JhmYM-s3HU10s,6
-fauna-1.2.0b4.dist-info/RECORD,,
+fauna/query/template.py,sha256=aSp8tjqt4xoh4kfGBE_YXa6YZgoOZmXg3ygTbRWfl3Y,2657
+fauna-2.0.0.dist-info/LICENSE,sha256=0uf36d4oXjlrnYCeCbzUq9413zcktAbg1y5V_dKmNlQ,545
+fauna-2.0.0.dist-info/METADATA,sha256=Na8Er_MvhNRBf5aL9FAxEQ5Pkjfojzb6vEeqPOhjsM8,15711
+fauna-2.0.0.dist-info/WHEEL,sha256=a-zpFRIJzOq5QfuhBzbhiA1eHTzNCJn8OdRvhdNX0Rk,110
+fauna-2.0.0.dist-info/top_level.txt,sha256=Ftl5tOivmmW8rHU9QbV0qMG8M9WQp3JhmYM-s3HU10s,6
+fauna-2.0.0.dist-info/RECORD,,
```

