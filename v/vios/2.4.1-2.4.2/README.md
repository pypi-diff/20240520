# Comparing `tmp/vios-2.4.1-py3-none-any.whl.zip` & `tmp/vios-2.4.2-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,26 +1,26 @@
-Zip file size: 52283 bytes, number of entries: 24
--rw-rw-rw-  2.0 fat    18481 b- defN 24-May-10 11:53 quark/proxy.py
--rw-rw-rw-  2.0 fat    16469 b- defN 24-May-10 11:53 quark/app/__init__.py
--rw-rw-rw-  2.0 fat     3591 b- defN 24-May-09 13:38 quark/app/_data.py
+Zip file size: 52321 bytes, number of entries: 24
+-rw-rw-rw-  2.0 fat    18473 b- defN 24-May-14 04:37 quark/proxy.py
+-rw-rw-rw-  2.0 fat    16568 b- defN 24-May-20 13:52 quark/app/__init__.py
+-rw-rw-rw-  2.0 fat     3556 b- defN 24-May-20 13:52 quark/app/_data.py
 -rw-rw-rw-  2.0 fat    11325 b- defN 24-May-09 13:38 quark/app/_demo.py
 -rw-rw-rw-  2.0 fat     9888 b- defN 24-May-09 13:38 quark/app/_task.py
 -rw-rw-rw-  2.0 fat     6622 b- defN 24-May-10 11:53 quark/app/uapi.py
 -rw-rw-rw-  2.0 fat     7528 b- defN 24-May-10 11:53 quark/driver/VirtualDevice.py
 -rw-rw-rw-  2.0 fat     1325 b- defN 24-May-10 11:53 quark/driver/__init__.py
 -rw-rw-rw-  2.0 fat     1386 b- defN 24-May-09 13:38 quark/driver/common/__init__.py
 -rw-rw-rw-  2.0 fat     5384 b- defN 24-May-10 11:53 quark/driver/common/basedriver.py
 -rw-rw-rw-  2.0 fat     5856 b- defN 24-May-09 13:38 quark/driver/common/quantity.py
 -rw-rw-rw-  2.0 fat     6473 b- defN 24-May-10 11:53 quark/driver/common/visadriver.py
--rw-rw-rw-  2.0 fat     2150 b- defN 24-May-10 11:53 quark/envelope/__init__.py
+-rw-rw-rw-  2.0 fat     2194 b- defN 24-May-14 04:37 quark/envelope/__init__.py
 -rw-rw-rw-  2.0 fat    15109 b- defN 24-May-10 11:53 quark/envelope/assembler.py
--rw-rw-rw-  2.0 fat     5196 b- defN 24-May-10 11:53 quark/envelope/calculator.py
+-rw-rw-rw-  2.0 fat     5245 b- defN 24-May-14 04:37 quark/envelope/calculator.py
 -rw-rw-rw-  2.0 fat     1984 b- defN 24-May-09 13:38 quark/envelope/device.py
 -rw-rw-rw-  2.0 fat     4689 b- defN 24-May-09 13:38 quark/envelope/processor.py
--rw-rw-rw-  2.0 fat     5241 b- defN 24-May-10 11:53 quark/envelope/router.py
+-rw-rw-rw-  2.0 fat     5216 b- defN 24-May-14 04:37 quark/envelope/router.py
 -rw-rw-rw-  2.0 fat     3812 b- defN 24-May-09 13:38 quark/envelope/systemq.py
--rw-rw-rw-  2.0 fat     1064 b- defN 24-May-10 12:06 vios-2.4.1.dist-info/LICENSE
--rw-rw-rw-  2.0 fat     2432 b- defN 24-May-10 12:06 vios-2.4.1.dist-info/METADATA
--rw-rw-rw-  2.0 fat       92 b- defN 24-May-10 12:06 vios-2.4.1.dist-info/WHEEL
--rw-rw-rw-  2.0 fat        6 b- defN 24-May-10 12:06 vios-2.4.1.dist-info/top_level.txt
--rw-rw-r--  2.0 fat     1925 b- defN 24-May-10 12:06 vios-2.4.1.dist-info/RECORD
-24 files, 138028 bytes uncompressed, 49213 bytes compressed:  64.3%
+-rw-rw-rw-  2.0 fat     1064 b- defN 24-May-20 14:11 vios-2.4.2.dist-info/LICENSE
+-rw-rw-rw-  2.0 fat     2432 b- defN 24-May-20 14:11 vios-2.4.2.dist-info/METADATA
+-rw-rw-rw-  2.0 fat       92 b- defN 24-May-20 14:11 vios-2.4.2.dist-info/WHEEL
+-rw-rw-rw-  2.0 fat        6 b- defN 24-May-20 14:11 vios-2.4.2.dist-info/top_level.txt
+-rw-rw-r--  2.0 fat     1925 b- defN 24-May-20 14:11 vios-2.4.2.dist-info/RECORD
+24 files, 138152 bytes uncompressed, 49251 bytes compressed:  64.4%
```

## zipnote {}

```diff
@@ -51,23 +51,23 @@
 
 Filename: quark/envelope/router.py
 Comment: 
 
 Filename: quark/envelope/systemq.py
 Comment: 
 
-Filename: vios-2.4.1.dist-info/LICENSE
+Filename: vios-2.4.2.dist-info/LICENSE
 Comment: 
 
-Filename: vios-2.4.1.dist-info/METADATA
+Filename: vios-2.4.2.dist-info/METADATA
 Comment: 
 
-Filename: vios-2.4.1.dist-info/WHEEL
+Filename: vios-2.4.2.dist-info/WHEEL
 Comment: 
 
-Filename: vios-2.4.1.dist-info/top_level.txt
+Filename: vios-2.4.2.dist-info/top_level.txt
 Comment: 
 
-Filename: vios-2.4.1.dist-info/RECORD
+Filename: vios-2.4.2.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## quark/proxy.py

```diff
@@ -313,15 +313,15 @@
             self.progress.finish(success)
             self.handles[tid].cancel()
         except Exception as e:
             pass
 
     def bar(self, interval: float = 2.0, disable: bool = False):
         """task progress. 
-        
+
         Tip: tips
             - Reduce the interval if result is empty.
             - If timeout is not None or not 0, task will be blocked, otherwise, the task will be executed asynchronously.
 
         Args:
             interval (float, optional): time period to retrieve data from `QuarkServer`. Defaults to 2.0.
```

## quark/app/__init__.py

```diff
@@ -139,24 +139,25 @@
     t.server = ss
     t.plot = plot if kwds.get('plot', False) else False
     t.timeout = 1e9 if block else None
     t.run()
     return t
 
 
-def rollback(tid: int):
-    """rollback the parameters with given task id
+def rollback(tid: int, checkpoint: str):
+    """rollback the parameters with given task id and checkpoint name
 
     Args:
         tid (int): task id
+        checkpoint (str): filename of checkpoint
     """
     _s = login(verbose=False)
 
     try:
-        config = get_config_by_tid(tid)
+        config = get_config_by_tid(tid, checkpoint)
         _s.clear()
         for k, v in config.items():
             _s.create(k, v)
     except Exception as e:
         logger.error(f'Failed to rollback: {e}')
```

## quark/app/_data.py

```diff
@@ -24,15 +24,15 @@
 from pathlib import Path
 
 import h5py
 import numpy as np
 from loguru import logger
 from quark import loads
 
-from quark.proxy import QUARK, startup
+from quark.proxy import QUARK
 
 sql = sqlite3.connect(QUARK/'checkpoint.db', check_same_thread=False)
 
 
 def get_dataset_by_tid(tid: int, signal: str, shape: tuple | list = []):
     filename, dataset = get_record_by_tid(tid)[7:9]
 
@@ -57,21 +57,20 @@
                 data[k] = ds[:]
                 continue
             data[k] = np.full((*shape, *ds.shape[1:]), 0, ds.dtype)
             data[k][np.unravel_index(np.arange(ds.shape[0]), shape)] = ds[:]
     return info, data
 
 
-def get_config_by_tid(tid: int = 0):
+def get_config_by_tid(tid: int = 0, checkpoint: str = ''):
     try:
         import git
 
-        srv = startup['quarkserver']
-        ckpt = '/'.join([srv['home'], 'cfg', srv['checkpoint']])
-        file = Path(ckpt).with_suffix('.json')
+        cfgp = Path.home()/f'Desktop/home/cfg/{checkpoint}'
+        file = cfgp.with_suffix('.json')
 
         repo = git.Repo(file.resolve().parent)
         if not tid:
             tree = repo.head.commit.tree
         else:
             tree = repo.commit(get_record_by_tid(tid)[-1]).tree
         config: dict = loads(tree[file.name].data_stream.read().decode())
```

## quark/envelope/__init__.py

```diff
@@ -18,17 +18,17 @@
 # AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 # LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 # OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 
 
 """
 Abstract: about envelope
-    Each step of a task will be executed in a **pipeline**
+    Each step of a task will be executed in a **pipeline** through the following stages
 
-    ``` {.py3 linenums="1" title="pipeline"}
+    ``` {.py3 linenums="1" title=" stages of the pipeline"}
     --->@assembler      @calculator       @device          @processor       @router
             ↓           ↑    ↓            ↑  ↓             ↑     ↓          ↑   ↓ 
             &ccompile   ↑    &calculate -->  &read|write -->     &process -->   &postprocess --->
             ↓           ↑
             &assemble -->
     ```
 """
```

## quark/envelope/calculator.py

```diff
@@ -30,22 +30,24 @@
 
 def calculate(step: str, target: str, cmd: list, preview: dict = {}):
     """preprocess each command such as predistortion and sampling
 
     Args:
         step (str): step name, e.g., main/step1/...
         target (str): hardware channel like **AWG.CH1.Offset**
-        cmd (list): command, in the type of tuple (ctype, value, unit, kwds), where ctype
-            must be one of WRITE/READ/WAIT, see assembler.preprocess for more details. 
+        cmd (list): command, in the type of tuple **(ctype, value, unit, kwds)**, where ctype
+            must be one of **WRITE/READ/WAIT**, see `assembler.preprocess` for more details. 
 
     Returns:
         tuple: (preprocessed result, sampled waveform to be shown in the `QuarkCanvas`)
 
-    Examples:
-        >>> calculate('main', 'AWG.CH1.Waveform',('WRITE',square(100e-6),'au',{'calibration':{}}))
+    Example:
+        ``` {.py3 linenums="1"}
+        calculate('main', 'AWG.CH1.Waveform',('WRITE',square(100e-6),'au',{'calibration':{}}))
+        ```
     """
     ctype, value, unit, kwds = cmd
 
     line = {}
 
     if ctype != 'WRITE':
         return (step, target, cmd), line
```

## quark/envelope/router.py

```diff
@@ -43,23 +43,26 @@
         a.plot([1, 2, 3])
     plt.savefig('test.png')
 
 
 def schedule():
     """Execute pre-set scheduled jobs
 
-    Example: `the scheduling rules are specified by etc.schedule`
-        - year(int | str): Year(4-digit number)
-        - month(int | str): Month(1-12)
-        - day(int | str): Day(1-31)
-        - week(int | str): Week(1-53)
-        - day_of_week(int | str): day of the week(0-6 or mon,tue,wed,thu,fri,stat,sun)
-        - hour(int | str): Hour(0-23)
-        - minute(int | str): Minute(0-59)
-        - second(int | str): Second(0-59)
+    Example: the scheduling rules are specified by `etc.schedule` using
+        |key|type|note|
+        |---|---|---|
+        |year|int, str|4-digit number|
+        |month|int, str|1-12|
+        |day|int, str|1-31|
+        |week|int, str|1-53|
+        |day_of_week|int, str|0-6 or mon, tue, wed, thu, fri, stat, sun|
+        |hour|int, str|0-24|
+        |minute|int, str|0-59|
+        |second|int, str|0-59|
+
     """
     # dst = shutil.move(Path('../../home/dat/144v3-swj-221013-normalJJ_2023-03-01-22-37-23.hdf5'),Path.home())
     # for path in sorted(Path('../../home/dat').glob('**/*.hdf5')):
     #     print((time.time() - path.stat().st_mtime)/(24*60*60),shutil.disk_usage(path))
     def test1():
         print(time.strftime('%Y-%m-%d %H:%M:%S'), 'do something1 ...')
```

## Comparing `vios-2.4.1.dist-info/LICENSE` & `vios-2.4.2.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `vios-2.4.1.dist-info/METADATA` & `vios-2.4.2.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: vios
-Version: 2.4.1
+Version: 2.4.2
 Summary: runtime requirements for systemq
 Author-email: YL Feng <fengyl@baqis.ac.cn>
 License: MIT License
         
         Copyright (c) 2021 YL Feng
         
         Permission is hereby granted, free of charge, to any person obtaining a copy
```

## Comparing `vios-2.4.1.dist-info/RECORD` & `vios-2.4.2.dist-info/RECORD`

 * *Files 11% similar despite different names*

```diff
@@ -1,24 +1,24 @@
-quark/proxy.py,sha256=EbmuCpaya3c1Kn0oCXAI52rd-W4PD-5sR0QsRZeUCuo,18481
-quark/app/__init__.py,sha256=i4W_0X-9sewJpC5vvK7ssishe_PGGVSA6n2fmtUw29o,16469
-quark/app/_data.py,sha256=N0d0u0Bzp3w8I0ykrNphuHx-TO7euHhqld0-L11XAZs,3591
+quark/proxy.py,sha256=9VAPdztBILqUoczm7umDI6VpPt0tc129tCtWfE_jgTc,18473
+quark/app/__init__.py,sha256=EPjmMvf_BImJvvZ1VWRs5SIuj4Gx1LLKAIM4yFchGks,16568
+quark/app/_data.py,sha256=QL5pmn4UO_oRERK3LVbbiKNnYMaGHzBjab3UMwhigS4,3556
 quark/app/_demo.py,sha256=9v09F2-2sU5ppIlgJUF1YNlUZzExd7l5436tFb5Mpsc,11325
 quark/app/_task.py,sha256=c0o-kmk0hIBEza8NmDME6copp_NAM6HGEAKb1wY_Kx0,9888
 quark/app/uapi.py,sha256=KM0KemYqd5E3xkHlgbtqSgoPkO5uFR_oxKxR8WW55p0,6622
 quark/driver/VirtualDevice.py,sha256=ePBTcZKlJpKC4Ojh1QdOfmSJ1G0HgpvpVU-jTV7IY-Y,7528
 quark/driver/__init__.py,sha256=GK94J6OicjDBhCWIMvQCZ7s9wpRg6Fh0gt2titR63AU,1325
 quark/driver/common/__init__.py,sha256=Z_DQzH9A4XxzFPt049Ly6Pz371zkT9NDuXXw2XD67WE,1386
 quark/driver/common/basedriver.py,sha256=Y3n62UxRu4Tsy07sEyK2bdvr9YUNi5WKsrIonjL02c0,5384
 quark/driver/common/quantity.py,sha256=_SaUpPKrIdkzr0yBntWG8Kwk3v6w0pwy7YcPIfCIgtA,5856
 quark/driver/common/visadriver.py,sha256=HTQLbgGpx8iJCu2tZS_GLFWSbCYoGzzGgdy0MTcT7ds,6473
-quark/envelope/__init__.py,sha256=FSHKtbgFCCeso4C5AlTpsNGQWVJWtSdFw9fn87jQyNc,2150
+quark/envelope/__init__.py,sha256=CcQ78Uz8lpCIUsJgJIfMT983js_D9l-_kVYsuQG3B1s,2194
 quark/envelope/assembler.py,sha256=xI8hN1Vol_YVzYN3wPde6avbFLz20WNIm9KrdQnm0Qk,15109
-quark/envelope/calculator.py,sha256=4gKWpTGU3OVpFllM2_c5tXibyk4RdqIc5GHsvNth_qg,5196
+quark/envelope/calculator.py,sha256=btrTYQLGwSXrSIjc_EU6TAKdac17M8ztjl7wcGFzjQA,5245
 quark/envelope/device.py,sha256=caTghDhh-doUrKMUplW4bTO8OK6M-scvZJo8MD-S5iY,1984
 quark/envelope/processor.py,sha256=xb2qBF9ZY12y-CeUgFFLrMSpuerwJYsKC619YLu3-0s,4689
-quark/envelope/router.py,sha256=vRVRgH6cq0jQqT21YoOtw7LmOTm0HiQhACO7XIdaKZs,5241
+quark/envelope/router.py,sha256=PaH8POWgRfCUUqRTiGEb0lsn5ntp1TnF30oljkWA1ys,5216
 quark/envelope/systemq.py,sha256=M15zb_gXG_fZR3c-ZiUTPMwParVJQg5gbOyJx3lfbv4,3812
-vios-2.4.1.dist-info/LICENSE,sha256=_lj6hFgaA-HA_kybcTr1ahdMp9VPeqEIJnOT8RbwOTg,1064
-vios-2.4.1.dist-info/METADATA,sha256=Xfn42raLauzm0eaVBMtdtv7MadpO5WjPsk2CmlKqGa4,2432
-vios-2.4.1.dist-info/WHEEL,sha256=oiQVh_5PnQM0E3gPdiz09WCNmwiHDMaGer_elqB3coM,92
-vios-2.4.1.dist-info/top_level.txt,sha256=7SspgYXMW_50_NVkPj0EbFg4jFlGVsaIDfpqNsA1IMY,6
-vios-2.4.1.dist-info/RECORD,,
+vios-2.4.2.dist-info/LICENSE,sha256=_lj6hFgaA-HA_kybcTr1ahdMp9VPeqEIJnOT8RbwOTg,1064
+vios-2.4.2.dist-info/METADATA,sha256=JZ8QAtusLZbO6wlTbDdhhL936fYrho2AwWiqZ_EMfzA,2432
+vios-2.4.2.dist-info/WHEEL,sha256=oiQVh_5PnQM0E3gPdiz09WCNmwiHDMaGer_elqB3coM,92
+vios-2.4.2.dist-info/top_level.txt,sha256=7SspgYXMW_50_NVkPj0EbFg4jFlGVsaIDfpqNsA1IMY,6
+vios-2.4.2.dist-info/RECORD,,
```

